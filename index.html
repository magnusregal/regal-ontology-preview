<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regal Ontology v2 â€” Reviewed</title>
    <style>
        :root {
            --bg: #1a1a2e;
            --surface: #16213e;
            --text: #eee;
            --accent: #0f3460;
            --red: #e94560;
            --green: #4ecca3;
            --yellow: #ffc107;
            --blue: #00d9ff;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        /* Navigation */
        .nav-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 220px;
            height: 100vh;
            background: var(--surface);
            padding: 1rem;
            overflow-y: auto;
            border-right: 2px solid var(--accent);
            z-index: 100;
        }
        .nav-container h3 {
            color: var(--blue);
            font-size: 0.9rem;
            margin: 1rem 0 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .nav-container h3:first-child { margin-top: 0; }
        .nav-container a {
            display: block;
            color: var(--text);
            text-decoration: none;
            padding: 0.3rem 0.5rem;
            font-size: 0.85rem;
            border-radius: 4px;
            transition: background 0.2s;
        }
        .nav-container a:hover {
            background: var(--accent);
            color: var(--blue);
        }
        .nav-container .addendum {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--accent);
        }
        .nav-container .addendum a {
            color: var(--green);
            font-size: 0.8rem;
        }
        /* Main content */
        .main-content {
            margin-left: 240px;
            padding: 2rem;
            max-width: 900px;
        }
        @media (max-width: 768px) {
            .nav-container {
                position: relative;
                width: 100%;
                height: auto;
                border-right: none;
                border-bottom: 2px solid var(--accent);
            }
            .main-content {
                margin-left: 0;
            }
        }
        h1 { color: var(--blue); margin-bottom: 0.5rem; font-size: 2rem; }
        h2 { color: var(--green); margin: 2rem 0 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--accent); }
        h3 { color: var(--text); margin: 1.5rem 0 0.75rem; }
        .meta { color: #888; margin-bottom: 2rem; font-size: 0.9rem; }
        table { width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9rem; }
        th, td { padding: 0.5rem; text-align: left; border: 1px solid var(--accent); }
        th { background: var(--accent); color: var(--blue); }
        tr:nth-child(even) { background: rgba(255,255,255,0.03); }
        ul, ol { margin: 1rem 0 1rem 1.5rem; }
        li { margin: 0.3rem 0; }
        code { background: var(--accent); padding: 0.2rem 0.4rem; border-radius: 3px; font-size: 0.85rem; }
        .review-note {
            background: rgba(233, 69, 96, 0.15);
            border-left: 4px solid var(--red);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }
        .review-note strong { color: var(--red); }
        .flag { color: var(--yellow); font-weight: bold; }
        .security-warning { background: rgba(255, 193, 7, 0.2); border-left-color: var(--yellow); }
        .summary-table th { background: var(--red); }
        .priority-high { color: var(--red); font-weight: bold; }
        .priority-medium { color: var(--yellow); }
        .priority-low { color: var(--green); }
        hr { border: none; border-top: 1px solid var(--accent); margin: 2rem 0; }
        .validation-note {
            background: rgba(78, 204, 163, 0.15);
            border-left: 4px solid var(--green);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }
        .validation-note strong { color: var(--green); }
        .validation-note code { background: rgba(78, 204, 163, 0.3); }
        .validation-note ul { margin: 0.5rem 0 0 1.5rem; }
        .validation-note li { margin: 0.2rem 0; }
        /* Collapsible sections */
        details { margin: 0.5rem 0; }
        summary { 
            cursor: pointer; 
            padding: 0.75rem; 
            background: var(--surface); 
            border-radius: 4px;
            font-weight: 500;
        }
        summary:hover { background: var(--accent); }
        details[open] summary { border-radius: 4px 4px 0 0; border-bottom: 1px solid var(--accent); }
        details > div, details > table, details > pre { 
            padding: 1rem; 
            background: rgba(255,255,255,0.02); 
            border: 1px solid var(--accent);
            border-top: none;
            border-radius: 0 0 4px 4px;
        }
        .method { 
            display: inline-block; 
            padding: 0.15rem 0.4rem; 
            border-radius: 3px; 
            font-size: 0.7rem; 
            font-weight: bold;
            margin-right: 0.3rem;
        }
        .method-get { background: var(--green); color: #000; }
        .method-post { background: var(--blue); color: #000; }
        .method-patch { background: var(--yellow); color: #000; }
        .method-delete { background: var(--red); color: #fff; }
        h4 { color: var(--blue); margin: 1rem 0 0.5rem; font-size: 0.95rem; }
        h5 { color: var(--text); margin: 1rem 0 0.5rem; font-size: 0.9rem; opacity: 0.9; }
    </style>
</head>
<body>
    <!-- Navigation Sidebar -->
    <nav class="nav-container">
        <h3>Sections</h3>
        <a href="#section-1">1. Purpose</a>
        <a href="#section-2">2. Domain Boundaries</a>
        <a href="#section-3">3. System Landscape</a>
        <a href="#section-4">4. API Surface</a>
        <a href="#section-5">5. Entity Model</a>
        <a href="#section-6">6. Projections</a>
        <a href="#section-7">7. Commands vs Events</a>
        <a href="#section-8">8. Cross-Cutting</a>
        <a href="#section-9">9. UK Expansion</a>
        <a href="#section-10">10. Migration (SFâ†’RDS)</a>
        <a href="#section-11">11. Review Summary</a>
        
        <h3>Repositories</h3>
        <a href="https://github.com/Regal-Credit-Management" target="_blank">Regal-Credit-Management</a>
        <a href="https://github.com/gobodo" target="_blank">gobodo (external)</a>
        
        <div class="addendum">
            <h3>Addendum Docs</h3>
            <a href="api-endpoints-detail.html">API Endpoints Detail</a>
            <a href="gobodo-reference.html">Gobodo Platform Reference</a>
            <a href="aws-git-comparison.html">AWS â†” Git Comparison</a>
            <a href="verification-report.html">AWS Verification Report</a>
        </div>
        
        <div class="addendum">
            <h3>Quick Links</h3>
            <a href="#gobodo-security" style="color: var(--yellow);">Gobodo Security Issue</a>
            <a href="#prod-gap" style="color: var(--yellow);">Production Gaps</a>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="main-content">
    <h1>Regal Ontology v2</h1>
    <div class="meta">
        <strong>Version:</strong> 2.0 | 
        <strong>Reviewed:</strong> 2026-02-22 | 
        <strong>Sources:</strong> Regal Ontology v1, AWS Architecture Inventory v2/v2.1, ontology-map.aws.yaml
        <br><strong>Last Updated:</strong> <span id="lastUpdated"></span>
        <script>document.getElementById('lastUpdated').textContent = new Date().toLocaleString();</script>
    </div>

    <h2 id="section-1">1) Purpose</h2>
    <p>The Regal Ontology defines the canonical model of Regal's business domain (clients, partners, services, workflows, and systems) in a way that can be:</p>
    <ul>
        <li><strong>queried</strong> â€” what is true right now?</li>
        <li><strong>explained</strong> â€” why did this happen?</li>
        <li><strong>acted on</strong> â€” what should we do next?</li>
        <li><strong>automated safely</strong> â€” what systems can mutate what records?</li>
    </ul>

    <h3>1.1 Core Systems</h3>
    <p>The ontology serves as the shared language across:</p>
    <ul>
        <li><strong>Client Dashboard + Product Hub + B2C apps</strong> â€” front-end experiences</li>
        <li><strong>Core APIs (RCM Serverless)</strong> â€” business logic layer</li>
        <li><strong>Gobodo API</strong> â€” custom dynamic data modeling engine powering Product Hub</li>
        <li><strong>Salesforce</strong> â€” legacy/transitional source-of-truth</li>
        <li><strong>RDS/DynamoDB</strong> â€” target architecture data stores</li>
        <li><strong>Vendors</strong> â€” Array, CyberSweep, Vouched integrations</li>
        <li><strong>Keycloak</strong> â€” identity + permissions (scopes as capabilities)</li>
    </ul>

    <h3>1.2 Data Residency Requirements</h3>
    <table>
        <tr><th>Region</th><th>Jurisdiction</th><th>Data Residency</th><th>Notes</th></tr>
        <tr><td>ğŸ‡ºğŸ‡¸ United States</td><td>US regulations</td><td>us-east-1, us-east-2</td><td>Current production</td></tr>
        <tr><td>ğŸ‡¬ğŸ‡§ United Kingdom</td><td>FCA regulated</td><td>eu-west-2 (London)</td><td>Target: June 2026</td></tr>
    </table>
    <p><em>All operations must respect data residency boundaries. Client data from UK operations must remain in UK-resident infrastructure. Cross-region data flows require explicit compliance review.</em></p>

    <h3>1.3 Success Criteria</h3>
    <p>The ontology is effective when:</p>
    <ul>
        <li>OK: Agents can answer 90%+ of domain questions without human escalation</li>
        <li>OK: New team members understand system boundaries within 1 day</li>
        <li>OK: API consumers can self-serve integration without tribal knowledge</li>
        <li>OK: Cross-team discussions use consistent terminology</li>
        <li>OK: System changes can be traced to ontology updates</li>
    </ul>

    <h3>1.4 Version Governance</h3>
    <table>
        <tr><th>Aspect</th><th>Policy</th></tr>
        <tr><td><strong>Owner</strong></td><td>Product Engineering (Magnus / Thomas)</td></tr>
        <tr><td><strong>Change Process</strong></td><td>PR to ontology repo â†’ Review by owner â†’ Merge â†’ Announce in #engineering</td></tr>
        <tr><td><strong>Breaking Changes</strong></td><td>Require 2-week notice + migration guide</td></tr>
        <tr><td><strong>Version Format</strong></td><td>MAJOR.MINOR (e.g., 2.1) â€” major = breaking, minor = additive</td></tr>
    </table>

    <div class="validation-note">
        <strong>VALIDATION â€” Section 1:</strong>
        <ul>
            <li><strong>AWS:</strong> Run <code>aws organizations list-accounts</code> to confirm all AWS accounts are listed</li>
            <li><strong>AWS:</strong> Check <code>aws ec2 describe-regions --query 'Regions[].RegionName'</code> for active regions</li>
            <li><strong>Git:</strong> Review <code>rcm-serverless/README.md</code> for any unlisted systems</li>
            <li><strong>Salesforce:</strong> Check org settings for data residency configuration</li>
            <li><strong>UK Timeline:</strong> Confirm June 2026 target with Anthony/Thomas</li>
        </ul>
    </div>

    <h2 id="section-2">2) Domain Boundaries (Bounded Contexts)</h2>
    <p>Units of ownership that map cleanly to repos, AWS stacks, and team responsibility. Each context has clear boundaries and communicates with others through defined interfaces.</p>

    <table>
        <tr>
            <th>#</th>
            <th>Context</th>
            <th>Scope</th>
            <th>Primary Repo</th>
            <th>Owner</th>
        </tr>
        <tr>
            <td>1</td>
            <td><strong>Identity & Access</strong></td>
            <td>Keycloak users, scopes, verification state, SSO</td>
            <td><code>keycloak-v26</code></td>
            <td>Platform</td>
        </tr>
        <tr>
            <td>2</td>
            <td><strong>Client & Partner Management</strong></td>
            <td>Clients, partner accounts, contacts, visibility links</td>
            <td><code>rcm-serverless</code></td>
            <td>Product Eng</td>
        </tr>
        <tr>
            <td>3</td>
            <td><strong>Enrollment & Service Lifecycle</strong></td>
            <td>Enrollment, eligibility, consent, service state</td>
            <td><code>rcm-serverless</code></td>
            <td>Product Eng</td>
        </tr>
        <tr>
            <td>4</td>
            <td><strong>CreditBlock Operations</strong></td>
            <td>Bureau workflows, freeze/unfreeze, status tracking</td>
            <td><code>cb-submodule</code></td>
            <td>Product Eng</td>
        </tr>
        <tr>
            <td>5</td>
            <td><strong>Monitoring / Array</strong></td>
            <td>Array users, credit monitoring enrollments, reports, webhooks</td>
            <td><code>vendor-submodule</code></td>
            <td>Product Eng</td>
        </tr>
        <tr>
            <td>6</td>
            <td><strong>CyberSweep / Exposure</strong></td>
            <td>Identity protection monitors, dark web results, automation</td>
            <td><code>cs-submodule</code></td>
            <td>Product Eng</td>
        </tr>
        <tr>
            <td>7</td>
            <td><strong>Support & Comms</strong></td>
            <td>Cases, tasks, notifications, email automation</td>
            <td><code>rcm-serverless</code></td>
            <td>Product Eng</td>
        </tr>
        <tr>
            <td>8</td>
            <td><strong>Data Sync & Projections</strong></td>
            <td>Salesforceâ†’RDS sync, read models, dashboards</td>
            <td><code>salesforce-data-sync</code></td>
            <td>Platform</td>
        </tr>
        <tr>
            <td>9</td>
            <td><strong>Dynamic Data Modeling (Gobodo)</strong></td>
            <td>Custom objects, page layouts, field definitions for Product Hub</td>
            <td><code>gobodo-infrastructure</code></td>
            <td>Product Eng</td>
        </tr>
    </table>

    <h3>2.1 Context Dependencies</h3>
    <p>How contexts communicate (arrows show data/event flow):</p>
    <pre style="background: var(--accent); padding: 1rem; border-radius: 8px; overflow-x: auto; font-size: 0.85rem;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Identity &     â”‚â”€â”€â”€â”€â”€â–¶â”‚  Client & Partner    â”‚â”€â”€â”€â”€â”€â–¶â”‚  Enrollment &   â”‚
â”‚  Access         â”‚      â”‚  Management          â”‚      â”‚  Lifecycle      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                         â”‚                           â”‚
        â”‚                         â–¼                           â–¼
        â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚  Support & Comms     â”‚      â”‚  CreditBlock    â”‚
        â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  Operations     â”‚
        â”‚                         â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                         â”‚                           â”‚
        â–¼                         â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Sync &    â”‚â—€â”€â”€â”€â”€â”€â”‚  Monitoring / Array  â”‚â—€â”€â”€â”€â”€â”€â”‚  CyberSweep     â”‚
â”‚  Projections    â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gobodo         â”‚ â—€â”€â”€ Product Hub reads/writes custom objects
â”‚  (Dynamic Data) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    </pre>

    <h3>2.2 UK Expansion Considerations</h3>
    <p>For UK data residency, each context must:</p>
    <ul>
        <li>Deploy to <code>eu-west-2</code> (London) region</li>
        <li>Ensure no cross-region PII transfer without explicit consent</li>
        <li>Maintain separate Keycloak realm for UK users</li>
        <li>Use UK-resident vendor endpoints where available (Array UK, etc.)</li>
    </ul>
    <p><em>No new bounded contexts required for UK â€” same contexts, regional deployment.</em></p>

    <div class="validation-note">
        <strong>VALIDATION â€” Section 2:</strong>
        <ul>
            <li><strong>Git:</strong> Run <code>gh repo list regalcredit --limit 50</code> to verify repo names match contexts</li>
            <li><strong>Git:</strong> Check <code>rcm-serverless/package.json</code> for submodule dependencies</li>
            <li><strong>AWS:</strong> Run <code>aws cloudformation list-stacks --query 'StackSummaries[].StackName'</code> to verify stack-to-context mapping</li>
            <li><strong>Team:</strong> Confirm owner assignments (Platform vs Product Eng) with Thomas</li>
            <li><strong>Keycloak:</strong> Check realm configuration for UK-specific realm plans</li>
        </ul>
    </div>

    <h2 id="section-3">3) System Landscape</h2>
    <p>Where truth lives and where actions occur. Systems are organized by function and include both US (current) and UK (planned) deployments.</p>
    
    <h3>3.1 Identity & Authorization</h3>
    <p><em>Verified via AWS scan 2026-02-22</em></p>
    <table>
        <tr><th>System</th><th>Dev Account (865942198740)</th><th>Prod Account (975050223773)</th><th>URLs</th></tr>
        <tr>
            <td><strong>Keycloak</strong><br><small>Identity provider, SSO</small></td>
            <td><code>keycloak-development</code><br>Aurora MySQL (2 instances)<br>OK: Not public</td>
            <td><code>keycloak-v16-release</code><br>Aurora MySQL (6 instances)<br>OK: Not public</td>
            <td>sso.dev.regalcredit.com<br>sso.stg.regalcredit.com<br><strong>sso.regalcredit.com</strong></td>
        </tr>
        <tr>
            <td><strong>Keycloak Authorizer</strong><br><small>Lambda authorizer for API Gateway</small></td>
            <td><code>core-cdk-lambda-keycloak-authorizer-development-pl</code><br><code>core-cdk-lambda-keycloak-authorizer-staging-pl</code></td>
            <td><code>core-cdk-lambda-keycloak-authorizer-*</code></td>
            <td>N/A (internal)</td>
        </tr>
    </table>

    <h3>3.2 Core Data Systems</h3>
    <p><em>Verified via AWS scan 2026-02-22</em></p>
    <table>
        <tr><th>System</th><th>Role</th><th>Dev (865942198740)</th><th>Prod (975050223773)</th></tr>
        <tr>
            <td><strong>Salesforce</strong></td>
            <td>Legacy SoR â€” Person Accounts, Contacts, Partner Accounts, Cases</td>
            <td colspan="2">External (Salesforce Cloud) â€” same instance for dev/prod</td>
        </tr>
        <tr>
            <td><strong>RDS (sfdatasync)</strong></td>
            <td>Target SoR â€” synced from Salesforce</td>
            <td><code>rcm-dsync-data-main-rds-dev</code><br><code>rcm-dsync-data-main-rds-stg</code><br>+ per-dev instances (alex, jim, wei)<br>Postgres, OK: Not public</td>
            <td class="flag">WARN: <strong>NOT DEPLOYED</strong><br>No rcm-dsync RDS in production!</td>
        </tr>
        <tr>
            <td><strong>DynamoDB</strong></td>
            <td>Read-optimized projections</td>
            <td><em>Not yet deployed</em></td>
            <td><em>Not yet deployed</em></td>
        </tr>
    </table>

    <h3 id="gobodo-security">3.3 Gobodo (Dynamic Data Platform)</h3>
    <p><strong><a href="gobodo-reference.html">View Full Gobodo Platform Reference â†’</a></strong></p>
    <p><strong>Gobodo</strong> is Regal's custom dynamic data modeling platform that powers Product Hub. It enables:</p>
    <ul>
        <li>Custom object definitions (like Salesforce custom objects)</li>
        <li>Dynamic page layouts and field configurations</li>
        <li>Role-based field visibility and permissions</li>
        <li>Schema evolution without code deployments</li>
    </ul>
    
    <h4>Source Repositories (github.com/gobodo)</h4>
    <table>
        <tr><th>Repo</th><th>Language</th><th>Purpose</th><th>Updated</th></tr>
        <tr>
            <td><a href="https://github.com/gobodo/gobodo-core" target="_blank"><code>gobodo/gobodo-core</code></a></td>
            <td>Java</td>
            <td>Core Gobodo engine</td>
            <td>7 minutes ago âœ…</td>
        </tr>
        <tr>
            <td><a href="https://github.com/gobodo/gobodo-api-js-promise" target="_blank"><code>gobodo/gobodo-api-js-promise</code></a></td>
            <td>JavaScript</td>
            <td>JS client (Promises)</td>
            <td>2 days ago</td>
        </tr>
        <tr>
            <td><code>gobodom/gobodom.github.io</code></td>
            <td>â€”</td>
            <td>Legacy docs site</td>
            <td>Oct 2014</td>
        </tr>
    </table>
    <p><em>Note: Gobodo repos are in a separate <code>gobodo</code> org, not <code>Regal-Credit-Management</code></em></p>
    
    <h4>AWS Infrastructure</h4>
    <p><em>Verified via AWS scan 2026-02-22</em></p>
    <table>
        <tr><th>Component</th><th>Dev (865942198740)</th><th>Prod (975050223773)</th><th>Notes</th></tr>
        <tr>
            <td><strong>Gobodo API</strong></td>
            <td><code>GobodoCacheLambda-Dev</code><br><code>CacheManagementLambda-Dev</code><br><code>StoreCacheLambda-Dev</code></td>
            <td><em>TBD</em></td>
            <td>REST API for custom objects</td>
        </tr>
        <tr>
            <td><strong>Gobodo Database</strong></td>
            <td><code>rcm-gobodo-db-stg</code><br>Postgres<br>Endpoint: <code>rcm-gobodo-db-stg.cqhna2fiukih.us-east-1.rds.amazonaws.com</code></td>
            <td><em>Not deployed</em></td>
            <td>Custom object data + metadata</td>
        </tr>
        <tr>
            <td><strong>Gobodo Cache</strong></td>
            <td><code>gobodo-cache-infra-dev</code> (API Gateway)<br>ElastiCache stack</td>
            <td><em>TBD</em></td>
            <td>Schema caching</td>
        </tr>
        <tr>
            <td><strong>Gobodo Neo4j</strong></td>
            <td><code>rcm-gobodo-neo4j-stg</code></td>
            <td><em>TBD</em></td>
            <td>Graph DB (discovered in scan)</td>
        </tr>
    </table>
    <div class="review-note security-warning">
        <strong>SECURITY ISSUE CONFIRMED (AWS scan 2026-02-22):</strong>
        <br><br>
        <table style="margin: 0.5rem 0;">
            <tr><td><strong>Instance:</strong></td><td><code>rcm-gobodo-db-stg</code></td></tr>
            <tr><td><strong>PubliclyAccessible:</strong></td><td><span class="flag">TRUE</span></td></tr>
            <tr><td><strong>Security Group:</strong></td><td><code>sg-09f4dfb35576fa76a</code></td></tr>
            <tr><td><strong>Port 5432:</strong></td><td><span class="flag">Open to 0.0.0.0/0</span></td></tr>
        </table>
        <br>
        <strong>Remediation Required:</strong>
        <ul style="margin-top: 0.5rem;">
            <li>Modify SG <code>sg-09f4dfb35576fa76a</code> to restrict to VPC CIDR only</li>
            <li>Set <code>PubliclyAccessible=False</code> on RDS instance</li>
            <li>Add VPN/bastion for dev access</li>
            <li>Enable SSL enforcement (<code>rds.force_ssl=1</code>)</li>
            <li><strong>Owner:</strong> Platform team | <strong>Priority:</strong> CRITICAL</li>
        </ul>
    </div>

    <h3>3.4 Vendor Systems</h3>
    <table>
        <tr><th>Vendor</th><th>Purpose</th><th>Lambdas</th><th>Credentials</th><th>UK Support</th></tr>
        <tr>
            <td><strong>Array</strong></td>
            <td>Credit reports, monitoring, scores</td>
            <td><code>core-cdk-lambda-array-*</code><br><code>vendor-array-cdk-*</code></td>
            <td>ParameterStore:<br><code>/cybersweep-serverless/array/*</code></td>
            <td>TBD â€” check UK bureau support</td>
        </tr>
        <tr>
            <td><strong>CyberSweep</strong></td>
            <td>Identity protection, dark web monitoring</td>
            <td><code>cybersweep-cdk-lambda-*</code></td>
            <td>ParameterStore:<br><code>/cybersweep-serverless/*</code></td>
            <td>TBD</td>
        </tr>
        <tr>
            <td><strong>Vouched</strong></td>
            <td>Identity verification (KYC)</td>
            <td><code>core-cdk-lambda-vouched-*</code></td>
            <td>SecretsManager</td>
            <td>TBD â€” may need UK KYC provider</td>
        </tr>
    </table>

    <h3>3.5 Front Ends</h3>
    <p><em>Verified via AWS scan 2026-02-22</em></p>
    <table>
        <tr><th>App</th><th>Dev</th><th>Staging</th><th>Production</th><th>Amplify App</th><th>Status</th></tr>
        <tr>
            <td><strong>Client Dashboard</strong><br><small>Partner-facing portal</small></td>
            <td>partner.dev.regalcredit.com</td>
            <td>partner.stg.regalcredit.com</td>
            <td><strong>partner.regalcredit.com</strong></td>
            <td><code>RegalCreditB2BWebDashboard</code><br><code>d3h9qkfgty36hl.amplifyapp.com</code></td>
            <td>OK: Live</td>
        </tr>
        <tr>
            <td><strong>Product Hub</strong><br><small>Internal ops + Gobodo UI</small></td>
            <td>producthub.dev.regalcredit.com</td>
            <td>producthub.stg.regalcredit.com</td>
            <td><em>Not deployed</em></td>
            <td><code>Regal-Product-Hub-Dev</code><br><code>Regal-Product-Hub-Stg</code></td>
            <td>ğŸš§ Dev/Stg only</td>
        </tr>
        <tr>
            <td><strong>Partner Portal (legacy?)</strong></td>
            <td colspan="3"><em>Unknown</em></td>
            <td><code>partnerportal2023</code><br><code>d1f7cg9rxlwckc.amplifyapp.com</code></td>
            <td>UNKNOWN: Verify status</td>
        </tr>
        <tr>
            <td><strong>Enrollment Pages</strong><br><small>Client signup flows</small></td>
            <td colspan="3"><em>Hosted separately (not Amplify)</em></td>
            <td>N/A</td>
            <td>OK: Live</td>
        </tr>
        <tr>
            <td><strong>B2C Mobile Apps</strong><br><small>Consumer-facing iOS</small></td>
            <td colspan="3">App Store (TestFlight for dev/staging)</td>
            <td>N/A</td>
            <td>OK: Live</td>
        </tr>
    </table>
    <p><em>Note: No Amplify apps found in production account (975050223773). Client Dashboard production may use different hosting.</em></p>

    <h3>3.6 CI/CD & Deployment Pipelines</h3>
    <p><em>Verified via GitHub org scan 2026-02-22 â€” Org: <code>Regal-Credit-Management</code> (38 repos)</em></p>
    <table>
        <tr><th>App / Service</th><th>Pipeline</th><th>Repo</th><th>Last Updated</th></tr>
        <tr>
            <td><strong>Client Dashboard</strong></td>
            <td>AWS Amplify</td>
            <td><code>RegalCreditB2BWebDashboard</code></td>
            <td>2026-01-27 âœ…</td>
        </tr>
        <tr>
            <td><strong>Client Dashboard API</strong></td>
            <td>TBD</td>
            <td><code>client-dashboard-api-v2</code></td>
            <td>2026-02-10 (New!)</td>
        </tr>
        <tr>
            <td><strong>Product Hub</strong></td>
            <td>AWS Amplify</td>
            <td><code>Regal-Product-Hub</code></td>
            <td>2026-02-20 OK: (Your PR!)</td>
        </tr>
        <tr>
            <td><strong>RCM Serverless (APIs)</strong></td>
            <td>AWS CDK Pipelines</td>
            <td><code>rcm-serverless</code> + submodules</td>
            <td>2026-02-03 (v1.7.4)</td>
        </tr>
        <tr>
            <td><strong>Keycloak</strong></td>
            <td>CDK / Manual</td>
            <td><code>keycloak-v26</code>, <code>keycloak-theme-partner-portal</code></td>
            <td>2026-01-29</td>
        </tr>
        <tr>
            <td><strong>Gobodo</strong></td>
            <td>CDK Pipelines / Elastic Beanstalk</td>
            <td><code>gobodo/gobodo-core</code> (Java)<br><code>gobodo/gobodo-api-js-promise</code></td>
            <td>Active OK: (separate org)</td>
        </tr>
        <tr>
            <td><strong>Salesforce Data Sync</strong></td>
            <td>CDK Pipelines</td>
            <td><code>salesforce-data-sync</code></td>
            <td>2026-02-18 âœ…</td>
        </tr>
        <tr>
            <td><strong>Enrollment Pages</strong></td>
            <td>TBD (not Amplify)</td>
            <td><code>classic-registration-forms</code></td>
            <td>2026-01-29</td>
        </tr>
        <tr>
            <td><strong>Email Services</strong></td>
            <td>TBD</td>
            <td><code>rcm-email-classifier-service</code>, <code>rcm-email-templating-engine</code></td>
            <td>2026-02-10</td>
        </tr>
    </table>
    
    <h4>Submodule Structure (rcm-serverless)</h4>
    <pre style="background: #1a1a2e; padding: 1rem; border-radius: 6px;">
rcm-serverless/
â”œâ”€â”€ core-submodule/      â†’ core-cdk-lambda-* (account, client, array, keycloak-authorizer)
â”œâ”€â”€ cb-submodule/        â†’ creditblock-cdk-lambda-* (bureau cases, credit reports)
â”œâ”€â”€ cs-submodule/        â†’ cybersweep-cdk-lambda-* (identity protection)
â”œâ”€â”€ vendor-submodule/    â†’ vendor-cdk-lambda-* (Array, Vouched integrations)
â”œâ”€â”€ utils-submodule/     â†’ shared utilities
â””â”€â”€ test-submodule/      â†’ test helpers</pre>
    <p><em>Total: 327 Lambdas deployed (285 us-east-1 + 42 us-east-2)</em></p>

    <div class="validation-note">
        <strong>VALIDATION â€” Section 3:</strong>
        <ul>
            <li><strong>AWS RDS:</strong> Run <code>aws rds describe-db-instances --query 'DBInstances[*].[DBInstanceIdentifier,Engine,PubliclyAccessible]'</code></li>
            <li><strong>AWS Lambda:</strong> Run <code>aws lambda list-functions --query 'Functions[].FunctionName' | grep -E 'gobodo|keycloak|core|creditblock|cybersweep'</code></li>
            <li><strong>AWS Amplify:</strong> Run <code>aws amplify list-apps</code> to verify all front-end apps</li>
            <li><strong>AWS API Gateway:</strong> Run <code>aws apigateway get-rest-apis</code> to confirm API IDs</li>
            <li><strong>AWS Security Groups:</strong> Audit Gobodo SG with <code>aws ec2 describe-security-groups --group-ids &lt;sg-id&gt;</code></li>
            <li><strong>Git:</strong> Check each repo's <code>buildspec.yml</code> or <code>amplify.yml</code> for pipeline details</li>
            <li><strong>Keycloak:</strong> Export realm config to verify SSO URLs: <code>kcadm.sh get realms</code></li>
            <li><strong>Vendor Docs:</strong> Review Array, CyberSweep, Vouched API docs for UK availability</li>
            <li><strong>Enrollment Pages:</strong> Identify actual hosting â€” check Route53 for DNS records</li>
        </ul>
    </div>

    <h2 id="section-4">4) API Surface</h2>
    <p>All APIs are served via AWS API Gateway with Keycloak JWT authorization. Each route requires specific scopes (capabilities) for access.</p>
    
    <h3>4.1 API Gateways</h3>
    <p><em>Verified via AWS scan 2026-02-22</em></p>
    <table>
        <tr><th>Domain</th><th>Stage</th><th>API ID</th><th>Region</th><th>Account</th><th>Notes</th></tr>
        <tr><td>api.dev.regalcredit.com</td><td>development</td><td><code>yqo32wi8cd</code></td><td>us-east-1</td><td>865942198740</td><td>Verified</td></tr>
        <tr><td>api.stg.regalcredit.com</td><td>staging</td><td><code>fl1928grye</code></td><td>us-east-1</td><td>865942198740</td><td>Verified</td></tr>
        <tr><td><strong>api.regalcredit.com</strong></td><td>production</td><td><code>gy0zwkmroe</code></td><td>us-east-1</td><td>975050223773</td><td>Verified</td></tr>
        <tr><td><strong>webhook.regalcredit.com</strong></td><td>production</td><td><code>ndcltu5vvd</code></td><td>us-east-1</td><td>975050223773</td><td>Verified</td></tr>
        <tr><td><em>api.uk.regalcredit.com</em></td><td><em>planned</em></td><td><em>TBD</em></td><td>eu-west-2</td><td>TBD</td><td>UK API (June 2026)</td></tr>
    </table>

    <h3>4.2 Authentication & Authorization</h3>
    <table>
        <tr><th>Auth Type</th><th>Method</th><th>Use Case</th></tr>
        <tr>
            <td><strong>Keycloak JWT</strong></td>
            <td><code>Authorization: Bearer &lt;token&gt;</code></td>
            <td>All authenticated endpoints (dashboards, apps)</td>
        </tr>
        <tr>
            <td><strong>API Key</strong></td>
            <td><code>x-api-key: &lt;key&gt;</code></td>
            <td>Webhook endpoints, vendor callbacks</td>
        </tr>
        <tr>
            <td><strong>Service Account</strong></td>
            <td>Keycloak client credentials flow</td>
            <td>Backend-to-backend, automation, agents</td>
        </tr>
    </table>

    <h3>4.3 Route Catalog</h3>
    <p>Verified via <code>rcm-serverless/swagger.yaml</code> â€” 48 endpoints, 84 routes in API Gateway</p>
    <p><strong><a href="api-endpoints-detail.html">View Full API Reference with Request/Response Schemas â†’</a></strong></p>
    
    <details>
    <summary><strong>Core APIs</strong> (<code>/core/v1/*</code>) â€” 31 endpoints</summary>
    <div>
    
    <h5>Account & Device</h5>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/core/v1/account/device/{userId}</code></td><td>GET</td><td>AccountLambda</td><td>Get client's devices</td></tr>
        <tr><td><code>/core/v1/account/device</code></td><td>POST</td><td>AccountLambda</td><td>Enroll device for push notifications</td></tr>
        <tr><td><code>/core/v1/account/device/{deviceId}</code></td><td>PATCH</td><td>AccountLambda</td><td>Update device settings</td></tr>
    </table>
    
    <h5>Client Management</h5>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/core/v1/client/{clientId}</code></td><td>GET</td><td>ContactLambda</td><td>Get client details</td></tr>
        <tr><td><code>/core/v1/client/{clientId}/profile</code></td><td>GET, PATCH</td><td>ContactLambda</td><td>Client profile operations</td></tr>
        <tr><td><code>/core/v1/client/{clientId}/family</code></td><td>GET</td><td>ClientFamilyLambda</td><td>List family members</td></tr>
        <tr><td><code>/core/v1/client/{clientId}/family/{familyId}</code></td><td>GET, PATCH</td><td>ClientFamilyLambda</td><td>Family member CRUD</td></tr>
        <tr><td><code>/core/v1/client/{clientId}/support</code></td><td>POST</td><td>CaseSupportLambda</td><td>Create support case</td></tr>
    </table>
    
    <h5>Partner Management</h5>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/core/v1/partner</code></td><td>GET</td><td>ContactLambda</td><td>List all partners</td></tr>
        <tr><td><code>/core/v1/partner/{partnerId}</code></td><td>GET, PATCH</td><td>ContactLambda</td><td>Partner details</td></tr>
        <tr><td><code>/core/v1/partner/{partnerId}/pricebook</code></td><td>GET</td><td>ContactLambda</td><td>Partner pricebook</td></tr>
        <tr><td><code>/core/v1/partner/{partnerId}/registration</code></td><td>GET</td><td>ContactLambda</td><td>Registration settings</td></tr>
        <tr><td><code>/core/v1/partner/contacts</code></td><td>GET, POST</td><td>ContactLambda</td><td>Partner contacts list/create</td></tr>
        <tr><td><code>/core/v1/partner/contacts/{contactId}</code></td><td>GET, PATCH</td><td>ContactLambda</td><td>Contact details</td></tr>
        <tr><td><code>/core/v1/partner/contacts/{contactId}/clients</code></td><td>GET</td><td>ClientContactRelationshipLambda</td><td>Contact's clients</td></tr>
        <tr><td><code>/core/v1/partner/client-managers/{contactId}/clients</code></td><td>GET</td><td>PartnerClientManagerLambda</td><td>CM's clients</td></tr>
    </table>
    
    <h5>Array Integration (Credit Reports)</h5>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/core/v1/array/enrollment/{clientId}</code></td><td>GET</td><td>ArrayGetEnrollmentLambda</td><td>Get enrollment status</td></tr>
        <tr><td><code>/core/v1/array/enrollment/report</code></td><td>POST</td><td>ArrayProductEnrollmentLambda</td><td>Generate enrollment report</td></tr>
        <tr><td><code>/core/v1/array/monitoring/enroll</code></td><td>POST</td><td>ArrayMonitoringEnrollmentLambda</td><td>Enroll in credit monitoring</td></tr>
        <tr><td><code>/core/v1/array/pullcreditreport</code></td><td>POST</td><td>ArrayPullCreditReportLambda</td><td>Pull credit report</td></tr>
        <tr><td><code>/core/v1/array/register</code></td><td>POST</td><td>ArrayUserRegistrationLambda</td><td>Register with Array</td></tr>
        <tr><td><code>/core/v1/array/register/{arrayClientKey}</code></td><td>GET</td><td>ArrayUserRegistrationDetailsLambda</td><td>Registration details</td></tr>
        <tr><td><code>/core/v1/array/listener</code></td><td>POST</td><td>ArrayWebhook*Lambda</td><td>Array webhook listener</td></tr>
    </table>
    
    <h5>Notifications</h5>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/core/v1/notifications/client/{accountId}</code></td><td>GET</td><td>PersonNotificationsLambda</td><td>List notifications</td></tr>
        <tr><td><code>/core/v1/notifications/client/{accountId}/{notificationId}</code></td><td>GET, PATCH</td><td>PersonNotificationsLambda</td><td>Notification detail/update</td></tr>
    </table>
    
    <h5>Verified (Vouched KYC)</h5>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/core/v1/verified</code></td><td>POST</td><td>VouchedVerifiedLambda</td><td>Start verification</td></tr>
        <tr><td><code>/core/v1/verified/case</code></td><td>POST</td><td>VouchedVerifiedLambda</td><td>Create verification case</td></tr>
        <tr><td><code>/core/v1/verified/case/{contactId}</code></td><td>GET</td><td>VouchedVerifiedLambda</td><td>Get verification status</td></tr>
        <tr><td><code>/core/v1/verified/businessManager/{contactId}</code></td><td>GET</td><td>VouchedVerifiedLambda</td><td>Check BM verification</td></tr>
    </table>
    
    <h5>Controls (SF Picklists)</h5>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/core/v1/controls/list/{object}/{field}</code></td><td>GET</td><td>ControlsLambda</td><td>Get picklist values from Salesforce</td></tr>
    </table>
    </div>
    </details>

    <details>
    <summary><strong>CreditBlock APIs</strong> (<code>/creditblock/v1/*</code>) â€” 8 endpoints</summary>
    <div>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/creditblock/v1/bureaus/summary/{clientId}</code></td><td>GET</td><td>BureauCaseLambda</td><td>Get bureau freeze summary for client</td></tr>
        <tr><td><code>/creditblock/v1/bureaus/{bureau}/checkStatus</code></td><td>GET, POST</td><td>BureauCaseLambda</td><td>Check/initiate freeze status</td></tr>
        <tr><td><code>/creditblock/v1/bureaus/{bureau}/block</code></td><td>POST</td><td>BureauBlockLambda</td><td>Request credit freeze</td></tr>
        <tr><td><code>/creditblock/v1/bureaus/{bureau}/unblock</code></td><td>POST</td><td>BureauUnblockLambda</td><td>Request credit unfreeze</td></tr>
        <tr><td><code>/creditblock/v1/primary/blockall</code></td><td>POST</td><td>BureauBlockLambda</td><td>Freeze all 3 bureaus</td></tr>
        <tr><td><code>/creditblock/v1/primary/unblockall</code></td><td>POST</td><td>BureauUnblockLambda</td><td>Unfreeze all 3 bureaus</td></tr>
        <tr><td><code>/creditblock/v1/checkStatusResult/{token}</code></td><td>GET</td><td>BureauCaseLambda</td><td>Get async status result</td></tr>
    </table>
    <p><em>Supported bureaus: <code>experian</code>, <code>equifax</code>, <code>transunion</code></em></p>
    </div>
    </details>

    <details>
    <summary><strong>CyberSweep APIs</strong> (<code>/cybersweep/v1/*</code>) â€” 5 endpoints</summary>
    <div>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/cybersweep/v1/idp/monitors/{accountId}</code></td><td>GET, POST</td><td>IDPMonitorLambda</td><td>List/create IDP monitors</td></tr>
        <tr><td><code>/cybersweep/v1/idp/monitors/{accountId}/{monitorId}</code></td><td>GET, PATCH, DELETE</td><td>IDPMonitorLambda</td><td>Monitor CRUD</td></tr>
        <tr><td><code>/cybersweep/v1/website/queue_automation</code></td><td>POST</td><td>WebsiteAutomationLambda</td><td>Queue website automation (Puppeteer)</td></tr>
    </table>
    </div>
    </details>

    <details>
    <summary><strong>Vendor APIs</strong> (<code>/vendor/*</code>) â€” 9 endpoints</summary>
    <div>
    
    <h5>Array v1 (Legacy)</h5>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/vendor/array/v1/report/credit-score-history</code></td><td>GET</td><td>ArrayReportLambda</td><td>Get score history</td></tr>
        <tr><td><code>/vendor/array/v1/monitoring/enrollments</code></td><td>POST</td><td>ArrayMonitoringLambda</td><td>Create monitoring enrollment</td></tr>
    </table>
    
    <h5>Array v2 (Current)</h5>
    <table>
        <tr><th>Route</th><th>Method</th><th>Lambda</th><th>Description</th></tr>
        <tr><td><code>/vendor/array/v2/user</code></td><td>POST</td><td>ArrayUserLambda</td><td>Create Array user</td></tr>
        <tr><td><code>/vendor/array/v2/user/{userId}/monitoring-enrollments</code></td><td>GET</td><td>ArrayUserLambda</td><td>Get user's enrollments</td></tr>
        <tr><td><code>/vendor/array/v2/authenticate</code></td><td>PATCH</td><td>ArrayUserLambda</td><td>Authenticate user</td></tr>
        <tr><td><code>/vendor/array/v2/report/order</code></td><td>POST</td><td>ArrayOrderCreditReportLambda</td><td>Order credit report</td></tr>
        <tr><td><code>/vendor/array/v2/report/pdf</code></td><td>GET</td><td>ArrayRetrievePDFCreditReportLambda</td><td>Get PDF report</td></tr>
        <tr><td><code>/vendor/array/v2/report/token</code></td><td>PUT</td><td>ArrayReportLambda</td><td>Refresh report token</td></tr>
    </table>
    </div>
    </details>

    <details>
    <summary><strong>Webhook Endpoints</strong> (<code>webhook.regalcredit.com</code>)</summary>
    <div>
    <table>
        <tr><th>Route</th><th>Source</th><th>Auth</th><th>Description</th></tr>
        <tr>
            <td><code>/webhooks/array/*</code></td>
            <td>Array</td>
            <td>API Key + IP allowlist</td>
            <td>Credit monitoring alerts, report ready</td>
        </tr>
        <tr>
            <td><code>/webhooks/cybersweep/*</code></td>
            <td>CyberSweep</td>
            <td>API Key + signature</td>
            <td>Dark web alerts, breach notifications</td>
        </tr>
    </table>
    </div>
    </details>

    <h3>4.4 Rate Limits & Quotas</h3>
    <table>
        <tr><th>Tier</th><th>Requests/sec</th><th>Burst</th><th>Applies To</th></tr>
        <tr><td>Default</td><td>100</td><td>200</td><td>All authenticated requests</td></tr>
        <tr><td>Partner Dashboard</td><td>50</td><td>100</td><td>Partner contact sessions</td></tr>
        <tr><td>Service Account</td><td>500</td><td>1000</td><td>Backend automation</td></tr>
        <tr><td>Webhook</td><td>1000</td><td>2000</td><td>Vendor callbacks</td></tr>
    </table>

    <h3>4.5 API Versioning</h3>
    <ul>
        <li><strong>URL versioning:</strong> <code>/core/v1/*</code>, <code>/creditblock/v1/*</code>, etc.</li>
        <li><strong>Breaking changes:</strong> New major version (v2), old version supported for 6 months</li>
        <li><strong>Deprecation:</strong> <code>Sunset</code> header + 90-day notice</li>
        <li><strong>UK APIs:</strong> Same version scheme, regional deployment</li>
    </ul>

    <div class="validation-note">
        <strong>VALIDATION â€” Section 4:</strong>
        <ul>
            <li><strong>AWS API Gateway:</strong> Export full route list: <code>aws apigateway get-resources --rest-api-id &lt;id&gt; --query 'items[].path'</code></li>
            <li><strong>AWS API Gateway:</strong> Verify rate limits: <code>aws apigateway get-usage-plans</code></li>
            <li><strong>Keycloak:</strong> Export all scopes: <code>kcadm.sh get clients -r &lt;realm&gt; --fields 'clientId,optionalClientScopes'</code></li>
            <li><strong>Git:</strong> Check <code>rcm-serverless/lib/routes/</code> for complete route definitions</li>
            <li><strong>Git:</strong> Review <code>rcm-serverless/openapi.yaml</code> if it exists for authoritative route spec</li>
            <li><strong>Lambda:</strong> Verify Lambda-to-route mappings via API Gateway integrations</li>
            <li><strong>Postman/Insomnia:</strong> Check team collections for undocumented endpoints</li>
            <li><strong>Webhook IPs:</strong> Verify Array/CyberSweep IP allowlists in Security Groups</li>
        </ul>
    </div>

    <h2 id="section-5">5) Entity Model (Canonical)</h2>
    <p>Definitive entity definitions with field-level detail. Sources: Salesforce objects, RDS tables, Keycloak attributes, vendor APIs.</p>
    
    <h3>5.1 Identity & Access</h3>
    
    <h4>UserIdentity</h4>
    <p><em>Source: Keycloak</em> â€” Authenticated user identity, links to either Client or PartnerContact</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>UUID</td><td>âœ“</td><td>Keycloak user ID (primary key)</td></tr>
        <tr><td><code>email</code></td><td>String</td><td>âœ“</td><td>Email address (unique, used for login)</td></tr>
        <tr><td><code>emailVerified</code></td><td>Boolean</td><td>âœ“</td><td>Email verification status</td></tr>
        <tr><td><code>firstName</code></td><td>String</td><td></td><td>First name</td></tr>
        <tr><td><code>lastName</code></td><td>String</td><td></td><td>Last name</td></tr>
        <tr><td><code>enabled</code></td><td>Boolean</td><td>âœ“</td><td>Account active status</td></tr>
        <tr><td><code>createdTimestamp</code></td><td>Long</td><td>âœ“</td><td>Account creation timestamp (epoch ms)</td></tr>
        <tr><td><code>attributes.salesforceId</code></td><td>String</td><td></td><td>Link to Salesforce Person Account or Contact</td></tr>
        <tr><td><code>attributes.userType</code></td><td>Enum</td><td></td><td><code>client</code> | <code>partner_contact</code> | <code>admin</code></td></tr>
        <tr><td><code>realmRoles</code></td><td>String[]</td><td></td><td>Assigned realm roles</td></tr>
        <tr><td><code>clientRoles</code></td><td>Object</td><td></td><td>Client-specific role mappings</td></tr>
    </table>

    <h4>Device</h4>
    <p><em>Source: RCM API</em> â€” Mobile device registration for push notifications</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>deviceId</code></td><td>UUID</td><td>âœ“</td><td>Unique device identifier (primary key)</td></tr>
        <tr><td><code>userId</code></td><td>UUID</td><td>âœ“</td><td>FK â†’ UserIdentity.id</td></tr>
        <tr><td><code>deviceType</code></td><td>Enum</td><td>âœ“</td><td><code>ios</code> | <code>android</code> | <code>web</code></td></tr>
        <tr><td><code>deviceToken</code></td><td>String</td><td>âœ“</td><td>Push notification token (APNs/FCM)</td></tr>
        <tr><td><code>deviceName</code></td><td>String</td><td></td><td>User-friendly device name</td></tr>
        <tr><td><code>osVersion</code></td><td>String</td><td></td><td>Operating system version</td></tr>
        <tr><td><code>appVersion</code></td><td>String</td><td></td><td>App version installed</td></tr>
        <tr><td><code>status</code></td><td>Enum</td><td>âœ“</td><td><code>active</code> | <code>inactive</code> | <code>retired</code></td></tr>
        <tr><td><code>registeredAt</code></td><td>DateTime</td><td>âœ“</td><td>Registration timestamp</td></tr>
        <tr><td><code>lastActiveAt</code></td><td>DateTime</td><td></td><td>Last activity timestamp</td></tr>
    </table>

    <h3>5.2 Customer & Relationships</h3>

    <h4>Client (Person Account)</h4>
    <p><em>Source: Salesforce Person Account â†’ RDS sync</em> â€” End customer who uses Regal services</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>SF Field</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>String(18)</td><td>âœ“</td><td><code>Id</code></td><td>Salesforce record ID (primary key)</td></tr>
        <tr><td><code>firstName</code></td><td>String</td><td>âœ“</td><td><code>FirstName</code></td><td>Legal first name</td></tr>
        <tr><td><code>lastName</code></td><td>String</td><td>âœ“</td><td><code>LastName</code></td><td>Legal last name</td></tr>
        <tr><td><code>email</code></td><td>String</td><td>âœ“</td><td><code>PersonEmail</code></td><td>Primary email address</td></tr>
        <tr><td><code>phone</code></td><td>String</td><td></td><td><code>Phone</code></td><td>Primary phone number</td></tr>
        <tr><td><code>mobilePhone</code></td><td>String</td><td></td><td><code>PersonMobilePhone</code></td><td>Mobile phone for SMS</td></tr>
        <tr><td><code>dateOfBirth</code></td><td>Date</td><td></td><td><code>PersonBirthdate</code></td><td>Date of birth</td></tr>
        <tr><td><code>ssn</code></td><td>String(9)</td><td></td><td><code>SSN__c</code></td><td>Social Security Number (encrypted)</td></tr>
        <tr><td><code>address</code></td><td>Object</td><td></td><td><code>PersonMailingAddress</code></td><td>Mailing address (street, city, state, zip)</td></tr>
        <tr><td><code>partnerId</code></td><td>String(18)</td><td></td><td><code>Partner_Account__c</code></td><td>FK â†’ Partner.id (referring partner)</td></tr>
        <tr><td><code>status</code></td><td>Enum</td><td>âœ“</td><td><code>Status__c</code></td><td><code>active</code> | <code>inactive</code> | <code>pending</code></td></tr>
        <tr><td><code>verificationStatus</code></td><td>Enum</td><td></td><td><code>Verification_Status__c</code></td><td><code>unverified</code> | <code>pending</code> | <code>verified</code> | <code>failed</code></td></tr>
        <tr><td><code>createdDate</code></td><td>DateTime</td><td>âœ“</td><td><code>CreatedDate</code></td><td>Record creation timestamp</td></tr>
        <tr><td><code>lastModifiedDate</code></td><td>DateTime</td><td>âœ“</td><td><code>LastModifiedDate</code></td><td>Last update timestamp</td></tr>
    </table>
    <p><strong>Relationships:</strong></p>
    <ul>
        <li><code>Client</code> â†’ <code>FamilyMember[]</code> (one-to-many)</li>
        <li><code>Client</code> â†’ <code>Enrollment[]</code> (one-to-many)</li>
        <li><code>Client</code> â†’ <code>Notification[]</code> (one-to-many)</li>
        <li><code>Client</code> â†’ <code>SupportCase[]</code> (one-to-many)</li>
        <li><code>Client</code> â†’ <code>Partner</code> (many-to-one, via partnerId)</li>
    </ul>

    <h4>FamilyMember</h4>
    <p><em>Source: Salesforce Custom Object</em> â€” Spouse or dependent linked to a Client for family plans</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>String(18)</td><td>âœ“</td><td>Salesforce record ID</td></tr>
        <tr><td><code>clientId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ Client.id (primary account holder)</td></tr>
        <tr><td><code>relationshipType</code></td><td>Enum</td><td>âœ“</td><td><code>spouse</code> | <code>dependent</code></td></tr>
        <tr><td><code>firstName</code></td><td>String</td><td>âœ“</td><td>Legal first name</td></tr>
        <tr><td><code>lastName</code></td><td>String</td><td>âœ“</td><td>Legal last name</td></tr>
        <tr><td><code>dateOfBirth</code></td><td>Date</td><td></td><td>Date of birth</td></tr>
        <tr><td><code>ssn</code></td><td>String(9)</td><td></td><td>SSN (for credit services)</td></tr>
        <tr><td><code>eligibleForServices</code></td><td>Boolean</td><td>âœ“</td><td>Can enroll in services</td></tr>
        <tr><td><code>status</code></td><td>Enum</td><td>âœ“</td><td><code>active</code> | <code>inactive</code></td></tr>
    </table>

    <h4>Partner (Partner Account)</h4>
    <p><em>Source: Salesforce Account (RecordType=Partner)</em> â€” B2B partner organization</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>SF Field</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>String(18)</td><td>âœ“</td><td><code>Id</code></td><td>Salesforce record ID</td></tr>
        <tr><td><code>name</code></td><td>String</td><td>âœ“</td><td><code>Name</code></td><td>Partner company name</td></tr>
        <tr><td><code>partnerCode</code></td><td>String</td><td>âœ“</td><td><code>Partner_Code__c</code></td><td>Unique partner identifier code</td></tr>
        <tr><td><code>status</code></td><td>Enum</td><td>âœ“</td><td><code>Partner_Status__c</code></td><td><code>prospect</code> | <code>active</code> | <code>inactive</code> | <code>churned</code></td></tr>
        <tr><td><code>registrationStatus</code></td><td>Enum</td><td></td><td><code>Registration_Status__c</code></td><td><code>pending</code> | <code>approved</code> | <code>rejected</code></td></tr>
        <tr><td><code>pricebookId</code></td><td>String(18)</td><td></td><td><code>Pricebook__c</code></td><td>FK â†’ Pricebook (partner-specific pricing)</td></tr>
        <tr><td><code>website</code></td><td>String</td><td></td><td><code>Website</code></td><td>Partner website URL</td></tr>
        <tr><td><code>industry</code></td><td>String</td><td></td><td><code>Industry</code></td><td>Business industry</td></tr>
        <tr><td><code>billingAddress</code></td><td>Object</td><td></td><td><code>BillingAddress</code></td><td>Billing address</td></tr>
    </table>
    <p><strong>Relationships:</strong></p>
    <ul>
        <li><code>Partner</code> â†’ <code>PartnerContact[]</code> (one-to-many)</li>
        <li><code>Partner</code> â†’ <code>Client[]</code> (one-to-many, clients referred by this partner)</li>
        <li><code>Partner</code> â†’ <code>Pricebook</code> (many-to-one)</li>
    </ul>

    <h4>PartnerContact</h4>
    <p><em>Source: Salesforce Contact</em> â€” Individual user at a Partner organization</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>String(18)</td><td>âœ“</td><td>Salesforce Contact ID</td></tr>
        <tr><td><code>partnerId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ Partner.id</td></tr>
        <tr><td><code>firstName</code></td><td>String</td><td>âœ“</td><td>First name</td></tr>
        <tr><td><code>lastName</code></td><td>String</td><td>âœ“</td><td>Last name</td></tr>
        <tr><td><code>email</code></td><td>String</td><td>âœ“</td><td>Email (used for Keycloak login)</td></tr>
        <tr><td><code>phone</code></td><td>String</td><td></td><td>Phone number</td></tr>
        <tr><td><code>title</code></td><td>String</td><td></td><td>Job title</td></tr>
        <tr><td><code>role</code></td><td>Enum</td><td></td><td><code>admin</code> | <code>user</code> | <code>viewer</code></td></tr>
        <tr><td><code>status</code></td><td>Enum</td><td>âœ“</td><td><code>active</code> | <code>inactive</code></td></tr>
    </table>

    <h4>ClientVisibilityLink</h4>
    <p><em>Source: Salesforce Junction Object</em> â€” Controls which PartnerContacts can see which Clients</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>String(18)</td><td>âœ“</td><td>Junction record ID</td></tr>
        <tr><td><code>partnerContactId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ PartnerContact.id</td></tr>
        <tr><td><code>clientId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ Client.id</td></tr>
        <tr><td><code>accessLevel</code></td><td>Enum</td><td>âœ“</td><td><code>read</code> | <code>write</code> | <code>admin</code></td></tr>
        <tr><td><code>grantedAt</code></td><td>DateTime</td><td>âœ“</td><td>When access was granted</td></tr>
        <tr><td><code>grantedBy</code></td><td>String(18)</td><td></td><td>Who granted access</td></tr>
    </table>

    <h3>5.3 Services & Enrollments</h3>

    <h4>Service</h4>
    <p><em>Source: Salesforce Product</em> â€” Available services offered to clients</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>String(18)</td><td>âœ“</td><td>Salesforce Product ID</td></tr>
        <tr><td><code>name</code></td><td>String</td><td>âœ“</td><td>Service name</td></tr>
        <tr><td><code>serviceType</code></td><td>Enum</td><td>âœ“</td><td><code>CreditBlock</code> | <code>CreditMonitoring</code> | <code>CreditRepair</code> | <code>CyberSweep</code></td></tr>
        <tr><td><code>description</code></td><td>String</td><td></td><td>Service description</td></tr>
        <tr><td><code>isActive</code></td><td>Boolean</td><td>âœ“</td><td>Available for enrollment</td></tr>
        <tr><td><code>requiresVerification</code></td><td>Boolean</td><td>âœ“</td><td>Requires identity verification</td></tr>
        <tr><td><code>vendorIntegration</code></td><td>String</td><td></td><td><code>array</code> | <code>cybersweep</code> | <code>internal</code></td></tr>
    </table>

    <h4>Enrollment</h4>
    <p><em>Source: Salesforce Custom Object</em> â€” Client subscription to a Service</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>String(18)</td><td>âœ“</td><td>Enrollment record ID</td></tr>
        <tr><td><code>clientId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ Client.id</td></tr>
        <tr><td><code>serviceId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ Service.id</td></tr>
        <tr><td><code>status</code></td><td>Enum</td><td>âœ“</td><td><code>pending</code> | <code>active</code> | <code>suspended</code> | <code>cancelled</code></td></tr>
        <tr><td><code>enrolledAt</code></td><td>DateTime</td><td>âœ“</td><td>Enrollment timestamp</td></tr>
        <tr><td><code>activatedAt</code></td><td>DateTime</td><td></td><td>When service became active</td></tr>
        <tr><td><code>cancelledAt</code></td><td>DateTime</td><td></td><td>Cancellation timestamp</td></tr>
        <tr><td><code>cancellationReason</code></td><td>String</td><td></td><td>Reason for cancellation</td></tr>
        <tr><td><code>externalId</code></td><td>String</td><td></td><td>Vendor-side enrollment ID (Array, CyberSweep)</td></tr>
        <tr><td><code>consentGiven</code></td><td>Boolean</td><td>âœ“</td><td>Client consented to terms</td></tr>
        <tr><td><code>consentTimestamp</code></td><td>DateTime</td><td></td><td>When consent was given</td></tr>
    </table>

    <h3>5.4 Support & Notifications</h3>

    <h4>Notification</h4>
    <p><em>Source: RCM API / DynamoDB</em> â€” In-app and push notifications to clients</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>UUID</td><td>âœ“</td><td>Notification ID</td></tr>
        <tr><td><code>clientId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ Client.id</td></tr>
        <tr><td><code>type</code></td><td>Enum</td><td>âœ“</td><td><code>alert</code> | <code>info</code> | <code>action_required</code> | <code>promotional</code></td></tr>
        <tr><td><code>category</code></td><td>Enum</td><td>âœ“</td><td><code>credit_block</code> | <code>monitoring</code> | <code>cybersweep</code> | <code>account</code> | <code>system</code></td></tr>
        <tr><td><code>title</code></td><td>String</td><td>âœ“</td><td>Notification title</td></tr>
        <tr><td><code>body</code></td><td>String</td><td>âœ“</td><td>Notification body text</td></tr>
        <tr><td><code>data</code></td><td>Object</td><td></td><td>Additional payload (deep link, etc.)</td></tr>
        <tr><td><code>read</code></td><td>Boolean</td><td>âœ“</td><td>Read status</td></tr>
        <tr><td><code>readAt</code></td><td>DateTime</td><td></td><td>When notification was read</td></tr>
        <tr><td><code>createdAt</code></td><td>DateTime</td><td>âœ“</td><td>Creation timestamp</td></tr>
        <tr><td><code>expiresAt</code></td><td>DateTime</td><td></td><td>Expiration timestamp</td></tr>
    </table>

    <h4>SupportCase</h4>
    <p><em>Source: Salesforce Case</em> â€” Customer support ticket</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>String(18)</td><td>âœ“</td><td>Salesforce Case ID</td></tr>
        <tr><td><code>caseNumber</code></td><td>String</td><td>âœ“</td><td>Human-readable case number</td></tr>
        <tr><td><code>clientId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ Client.id</td></tr>
        <tr><td><code>subject</code></td><td>String</td><td>âœ“</td><td>Case subject line</td></tr>
        <tr><td><code>description</code></td><td>String</td><td></td><td>Case description</td></tr>
        <tr><td><code>status</code></td><td>Enum</td><td>âœ“</td><td><code>new</code> | <code>in_progress</code> | <code>waiting_on_client</code> | <code>resolved</code> | <code>closed</code></td></tr>
        <tr><td><code>priority</code></td><td>Enum</td><td></td><td><code>low</code> | <code>medium</code> | <code>high</code> | <code>critical</code></td></tr>
        <tr><td><code>category</code></td><td>Enum</td><td></td><td><code>billing</code> | <code>technical</code> | <code>service</code> | <code>general</code></td></tr>
        <tr><td><code>ownerId</code></td><td>String(18)</td><td></td><td>Assigned agent</td></tr>
        <tr><td><code>createdDate</code></td><td>DateTime</td><td>âœ“</td><td>Case creation timestamp</td></tr>
        <tr><td><code>closedDate</code></td><td>DateTime</td><td></td><td>Case closure timestamp</td></tr>
    </table>

    <h3>5.5 CreditBlock Operations</h3>

    <h4>BureauCase</h4>
    <p><em>Source: RCM API</em> â€” Credit freeze/unfreeze operation with a bureau</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>id</code></td><td>UUID</td><td>âœ“</td><td>Bureau case ID</td></tr>
        <tr><td><code>clientId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ Client.id</td></tr>
        <tr><td><code>bureau</code></td><td>Enum</td><td>âœ“</td><td><code>equifax</code> | <code>experian</code> | <code>transunion</code></td></tr>
        <tr><td><code>operationType</code></td><td>Enum</td><td>âœ“</td><td><code>freeze</code> | <code>unfreeze</code> | <code>temporary_lift</code></td></tr>
        <tr><td><code>status</code></td><td>Enum</td><td>âœ“</td><td><code>pending</code> | <code>in_progress</code> | <code>completed</code> | <code>failed</code></td></tr>
        <tr><td><code>pin</code></td><td>String</td><td></td><td>Bureau PIN (encrypted)</td></tr>
        <tr><td><code>requestedAt</code></td><td>DateTime</td><td>âœ“</td><td>Request timestamp</td></tr>
        <tr><td><code>completedAt</code></td><td>DateTime</td><td></td><td>Completion timestamp</td></tr>
        <tr><td><code>errorMessage</code></td><td>String</td><td></td><td>Error details if failed</td></tr>
        <tr><td><code>confirmationNumber</code></td><td>String</td><td></td><td>Bureau confirmation number</td></tr>
    </table>

    <h3>5.6 Vendor Entities</h3>

    <h4>ArrayUser</h4>
    <p><em>Source: Array API</em> â€” User record in Array credit monitoring system</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>arrayUserId</code></td><td>String</td><td>âœ“</td><td>Array's internal user ID</td></tr>
        <tr><td><code>clientId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ Client.id (Regal side)</td></tr>
        <tr><td><code>email</code></td><td>String</td><td>âœ“</td><td>Email registered with Array</td></tr>
        <tr><td><code>status</code></td><td>Enum</td><td>âœ“</td><td><code>active</code> | <code>inactive</code> | <code>suspended</code></td></tr>
        <tr><td><code>enrollmentDate</code></td><td>DateTime</td><td>âœ“</td><td>When enrolled in Array</td></tr>
        <tr><td><code>monitoringEnabled</code></td><td>Boolean</td><td>âœ“</td><td>Credit monitoring active</td></tr>
        <tr><td><code>lastReportDate</code></td><td>DateTime</td><td></td><td>Last credit report pulled</td></tr>
    </table>

    <h4>CreditReport</h4>
    <p><em>Source: Array API</em> â€” Credit report data from Array</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>reportId</code></td><td>String</td><td>âœ“</td><td>Array report ID</td></tr>
        <tr><td><code>arrayUserId</code></td><td>String</td><td>âœ“</td><td>FK â†’ ArrayUser.arrayUserId</td></tr>
        <tr><td><code>reportType</code></td><td>Enum</td><td>âœ“</td><td><code>full</code> | <code>summary</code> | <code>score_only</code></td></tr>
        <tr><td><code>bureau</code></td><td>Enum</td><td>âœ“</td><td><code>equifax</code> | <code>experian</code> | <code>transunion</code></td></tr>
        <tr><td><code>score</code></td><td>Integer</td><td></td><td>Credit score (300-850)</td></tr>
        <tr><td><code>scoreModel</code></td><td>String</td><td></td><td>e.g., <code>VantageScore3</code>, <code>FICO8</code></td></tr>
        <tr><td><code>pulledAt</code></td><td>DateTime</td><td>âœ“</td><td>When report was pulled</td></tr>
        <tr><td><code>pdfUrl</code></td><td>String</td><td></td><td>URL to PDF report (signed, expires)</td></tr>
    </table>

    <h4>CyberSweepMonitor</h4>
    <p><em>Source: CyberSweep API</em> â€” Dark web / identity monitoring configuration</p>
    <table>
        <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
        <tr><td><code>monitorId</code></td><td>String</td><td>âœ“</td><td>CyberSweep monitor ID</td></tr>
        <tr><td><code>clientId</code></td><td>String(18)</td><td>âœ“</td><td>FK â†’ Client.id</td></tr>
        <tr><td><code>monitorType</code></td><td>Enum</td><td>âœ“</td><td><code>email</code> | <code>ssn</code> | <code>phone</code> | <code>passport</code> | <code>credit_card</code></td></tr>
        <tr><td><code>monitoredValue</code></td><td>String</td><td>âœ“</td><td>Value being monitored (hashed/encrypted)</td></tr>
        <tr><td><code>status</code></td><td>Enum</td><td>âœ“</td><td><code>active</code> | <code>paused</code> | <code>deleted</code></td></tr>
        <tr><td><code>alertCount</code></td><td>Integer</td><td></td><td>Number of alerts generated</td></tr>
        <tr><td><code>lastAlertAt</code></td><td>DateTime</td><td></td><td>Most recent alert timestamp</td></tr>
        <tr><td><code>createdAt</code></td><td>DateTime</td><td>âœ“</td><td>Monitor creation timestamp</td></tr>
    </table>

    <h3>5.7 Entity Relationship Diagram</h3>
    <pre style="background: var(--accent); padding: 1rem; border-radius: 8px; overflow-x: auto; font-size: 0.8rem;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UserIdentity   â”‚       â”‚     Partner     â”‚       â”‚     Service     â”‚
â”‚  (Keycloak)     â”‚       â”‚  (SF Account)   â”‚       â”‚  (SF Product)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚                         â”‚
         â”‚ 1:1                     â”‚ 1:N                     â”‚
         â–¼                         â–¼                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚     Client      â”‚â—€â”€â”€â”€â”€â”€â”€â”‚ PartnerContact  â”‚                â”‚
â”‚ (SF Person Acct)â”‚       â”‚  (SF Contact)   â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
         â”‚                         â”‚                         â”‚
         â”‚ 1:N                     â”‚                         â”‚
         â–¼                         â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  FamilyMember   â”‚       â”‚ClientVisibility â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚     Link        â”‚                â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
         â”‚                                                   â”‚
         â”‚ 1:N                                               â”‚
         â–¼                                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Enrollment    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ArrayUser     â”‚  â”‚   BureauCase    â”‚  â”‚ CyberSweepMon   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CreditReport   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    </pre>
    <div class="validation-note">
        <strong>VALIDATION â€” Section 5:</strong>
        <ul>
            <li><strong>Salesforce:</strong> Export object definitions: Setup â†’ Object Manager â†’ Export all fields for Person Account, Contact, Partner Account</li>
            <li><strong>Salesforce:</strong> Run SOQL: <code>SELECT EntityDefinition.QualifiedApiName, QualifiedApiName, DataType FROM FieldDefinition WHERE EntityDefinition.QualifiedApiName IN ('Account', 'Contact')</code></li>
            <li><strong>RDS:</strong> Export schema: <code>pg_dump --schema-only rcm_dsync_db > schema.sql</code></li>
            <li><strong>RDS:</strong> Run: <code>SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public'</code></li>
            <li><strong>Gobodo:</strong> Export custom object definitions from Gobodo metadata tables</li>
            <li><strong>Git:</strong> Check <code>rcm-serverless/src/models/</code> or <code>types/</code> for TypeScript interfaces</li>
            <li><strong>Keycloak:</strong> Review user attributes and required fields in realm settings</li>
            <li><strong>Array API Docs:</strong> Pull entity definitions for ArrayUser, CreditReport</li>
            <li><strong>CyberSweep API Docs:</strong> Pull entity definitions for monitors</li>
        </ul>
    </div>

    <h2 id="section-6">6) Projections & Read Models</h2>
    <p><em>Target architecture for read-optimized views (DynamoDB, materialized views)</em></p>
    <div class="review-note">
        <strong>REVIEW:</strong> Section is sparse. Define specific read models for: Client Dashboard views, Partner aggregations, Reporting/analytics, Agent decision-making.
    </div>
    <div class="validation-note">
        <strong>VALIDATION â€” Section 6:</strong>
        <ul>
            <li><strong>AWS DynamoDB:</strong> Run <code>aws dynamodb list-tables</code> to find existing read tables</li>
            <li><strong>AWS DynamoDB:</strong> Describe table schemas: <code>aws dynamodb describe-table --table-name &lt;name&gt;</code></li>
            <li><strong>Git:</strong> Search for DynamoDB table definitions in CDK: <code>grep -r "dynamodb.Table" rcm-serverless/</code></li>
            <li><strong>Client Dashboard:</strong> Review React components to identify data shapes needed</li>
            <li><strong>Client Dashboard:</strong> Check Apollo/GraphQL queries if used, or REST call patterns</li>
            <li><strong>RDS:</strong> Check for materialized views: <code>SELECT matviewname FROM pg_matviews WHERE schemaname = 'public'</code></li>
        </ul>
    </div>

    <h2 id="section-7">7) Commands vs Events</h2>
    
    <h3>7.1 Commands (write intents)</h3>
    <p><em>TODO: Add this section</em></p>

    <h3>7.2 Canonical Events</h3>
    <table>
        <tr><th>Category</th><th>Events</th></tr>
        <tr><td>Identity</td><td>device_registered, device_token_updated</td></tr>
        <tr><td>Client</td><td>client_profile_updated, family_member_updated</td></tr>
        <tr><td>Partner</td><td>partner_contact_created, client_visibility_changed</td></tr>
        <tr><td>CreditBlock</td><td>bureau_block_requested, block_process_completed</td></tr>
        <tr><td>Array</td><td>array_user_created, report_pdf_ready</td></tr>
        <tr><td>CyberSweep</td><td>monitor_added, monitor_deleted</td></tr>
        <tr><td>Data Sync</td><td>rcm_dsync_sync_completed</td></tr>
    </table>
    <div class="review-note">
        <strong>REVIEW:</strong> Verify event coverage is complete. IMPROVE: Add sequence diagrams for key flows. Add Commands section.
    </div>
    <div class="validation-note">
        <strong>VALIDATION â€” Section 7:</strong>
        <ul>
            <li><strong>AWS EventBridge:</strong> List event buses: <code>aws events list-event-buses</code></li>
            <li><strong>AWS EventBridge:</strong> List rules: <code>aws events list-rules --query 'Rules[].Name'</code></li>
            <li><strong>AWS SNS:</strong> List topics: <code>aws sns list-topics</code></li>
            <li><strong>AWS SQS:</strong> List queues: <code>aws sqs list-queues</code></li>
            <li><strong>Git:</strong> Search for event definitions: <code>grep -r "EventBridge\|putEvents\|SNS\|publish" rcm-serverless/</code></li>
            <li><strong>Git:</strong> Check for event type constants or enums in <code>src/types/</code> or <code>src/events/</code></li>
            <li><strong>CloudWatch Logs:</strong> Sample recent events to discover undocumented event types</li>
        </ul>
    </div>

    <h2>8) Policy & Safety Model</h2>
    <p><strong>Capabilities:</strong> <code>salesforce:read</code> vs <code>salesforce:read-write</code>, <code>client-dashboard:read</code> vs <code>client-dashboard:read-write</code></p>
    <p><strong>Verification-Required:</strong> bureau block/unblock, verification, vendor enrollments</p>
    <p><strong>Agent Question:</strong> Can I do this autonomously, or draft + ask approval?</p>
    <div class="review-note">
        <strong>REVIEW:</strong> Expand capability matrix. Add agent autonomy levels (autonomous / human-in-loop / draft-only). Add escalation paths. Define audit requirements.
    </div>
    <div class="validation-note">
        <strong>VALIDATION â€” Section 8:</strong>
        <ul>
            <li><strong>Keycloak:</strong> Export all roles: <code>kcadm.sh get roles -r &lt;realm&gt;</code></li>
            <li><strong>Keycloak:</strong> Export all client scopes: <code>kcadm.sh get client-scopes -r &lt;realm&gt;</code></li>
            <li><strong>Keycloak:</strong> Review scope-to-role mappings in realm admin console</li>
            <li><strong>Git:</strong> Check authorizer Lambda for scope validation logic</li>
            <li><strong>Git:</strong> Search for permission checks: <code>grep -r "scope\|permission\|authorize" rcm-serverless/</code></li>
            <li><strong>AWS IAM:</strong> Review Lambda execution roles for least-privilege: <code>aws iam list-role-policies --role-name &lt;role&gt;</code></li>
            <li><strong>Compliance:</strong> Review FCA requirements for UK audit logging</li>
        </ul>
    </div>

    <h2>9) Implementation Bindings</h2>
    <table>
        <tr><th>Domain</th><th>Repos</th><th>AWS Stacks</th></tr>
        <tr><td>Identity</td><td>keycloak-v26, keycloak-theme-*</td><td>keycloak-development, keycloak-v16-release</td></tr>
        <tr><td>Client/Partner</td><td>rcm-serverless, client-dashboard-api-v2</td><td>rcm-pipeline-*-stack-*</td></tr>
        <tr><td>CreditBlock</td><td>cb-submodule</td><td>rcm-pipeline-creditblock-*</td></tr>
        <tr><td>CyberSweep</td><td>cs-submodule</td><td>rcm-pipeline-cybersweep-*</td></tr>
        <tr><td>Data Sync</td><td>salesforce-data-sync</td><td>rcm-dsync-*</td></tr>
        <tr><td>Gobodo</td><td>gobodo-infrastructure</td><td>gobodo-infrastructure-rds-*</td></tr>
    </table>
    <div class="review-note">
        <strong>REVIEW:</strong> Verify mappings are accurate. IMPROVE: Add deployment commands. Add CI/CD pipeline references.
    </div>
    <div class="validation-note">
        <strong>VALIDATION â€” Section 9:</strong>
        <ul>
            <li><strong>Git:</strong> Run <code>gh repo list regalcredit --limit 100 --json name,url</code> to get full repo list</li>
            <li><strong>Git:</strong> Check each repo's README for deployment instructions</li>
            <li><strong>AWS CloudFormation:</strong> List all stacks: <code>aws cloudformation list-stacks --stack-status-filter CREATE_COMPLETE UPDATE_COMPLETE</code></li>
            <li><strong>AWS CodePipeline:</strong> List pipelines: <code>aws codepipeline list-pipelines</code></li>
            <li><strong>AWS Amplify:</strong> Get app details: <code>aws amplify list-apps --query 'apps[].{name:name,repo:repository}'</code></li>
            <li><strong>Git:</strong> Check <code>.github/workflows/</code> or <code>buildspec.yml</code> in each repo</li>
        </ul>
    </div>

    <h2 id="section-10">10) Migration Snapshot (Salesforce â†’ RDS)</h2>
    <p><em>Verified via AWS scan + <code>salesforce-data-sync</code> repo analysis 2026-02-22</em></p>
    
    <h3>10.1 Sync Orchestrator Architecture</h3>
    <p>The <strong>Sync Orchestrator</strong> is an AWS Step Functions workflow that coordinates end-to-end Salesforce data synchronization:</p>
    <pre style="background: #1a1a2e; padding: 1rem; border-radius: 6px; font-size: 0.8rem;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   InitSync     â”‚ â†’ Creates sync_run record (Prisma ORM)
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FetchBatch    â”‚ â†’ Queries Salesforce, computes batch definitions
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EnqueueBatches â”‚â”€â”€â”€â”€â–¶â”‚ EnqueueSingleBatch  â”‚ (Map state, parallel)
â”‚ (if batches)   â”‚     â”‚ .waitForTaskToken   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ SQS â†’ PersistWorker â”‚
        â”‚              â”‚ â†’ sendTaskSuccess   â”‚
        â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FinalizeSync  â”‚ â†’ Updates sync_run status, triggers projections
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SyncSucceeded â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Error Path: Handle*Failure â†’ FailWorkflow â†’ NotifyFailure â†’ SyncFailed
    </pre>
    
    <h3>10.2 Lambda Functions</h3>
    <table>
        <tr><th>Lambda</th><th>Purpose</th><th>Dev</th><th>Prod</th></tr>
        <tr><td><code>init-sync</code></td><td>Creates sync_run record</td><td>âœ…</td><td class="flag">âŒ</td></tr>
        <tr><td><code>fetch-batch</code></td><td>Queries SF, computes batches</td><td>âœ…</td><td class="flag">âŒ</td></tr>
        <tr><td><code>persist-worker</code></td><td>Processes batches from SQS</td><td>âœ…</td><td class="flag">âŒ</td></tr>
        <tr><td><code>finalize-sync</code></td><td>Updates status, triggers projections</td><td>âœ…</td><td class="flag">âŒ</td></tr>
        <tr><td><code>projection-builder</code></td><td>Builds read models (DynamoDB)</td><td>âœ…</td><td class="flag">âŒ</td></tr>
    </table>
    
    <h3>10.3 Infrastructure Components</h3>
    <table>
        <tr><th>Component</th><th>Dev (865942198740)</th><th>Prod (975050223773)</th></tr>
        <tr><td>Step Functions</td><td><code>rcm-dsync-sync-orchestrator-dev</code></td><td class="flag">MISSING: None</td></tr>
        <tr><td>EventBridge</td><td><code>rcm-dsync-sync-schedule-dev</code></td><td class="flag">MISSING: None</td></tr>
        <tr><td>SQS Queues</td><td>Batch processing queues</td><td class="flag">MISSING: None</td></tr>
        <tr>
            <td>RDS (Postgres)</td>
            <td>
                <code>rcm-dsync-data-main-rds-dev</code><br>
                <code>rcm-dsync-data-main-rds-stg</code><br>
                <code>-dev-alex</code>, <code>-dev-jim</code>, <code>-dev-wei</code><br>
                All OK: Not public
            </td>
            <td class="flag">MISSING: None</td>
        </tr>
        <tr><td>DynamoDB</td><td>Projection tables (read models)</td><td class="flag">MISSING: None</td></tr>
    </table>
    
    <h3>10.4 Sync Types</h3>
    <ul>
        <li><strong>Full Sync:</strong> Complete data pull from Salesforce</li>
        <li><strong>Delta Sync:</strong> Incremental changes since last sync</li>
        <li><strong>Triggered By:</strong> <code>scheduled</code> (EventBridge), <code>manual</code>, <code>api</code></li>
    </ul>
    
    <h3>10.5 Database Schema (Prisma ORM)</h3>
    <p>Key tables in RDS:</p>
    <ul>
        <li><code>sync_runs</code> â€” Sync execution history</li>
        <li><code>sync_batches</code> â€” Batch definitions with record_ids (JSONB)</li>
        <li><code>accounts</code> â€” Salesforce Account mirror</li>
        <li><code>contacts</code> â€” Salesforce Contact mirror</li>
        <li><code>migrations</code> â€” 67 migration files tracked</li>
    </ul>
    <div class="review-note security-warning">
        <span id="prod-gap"></span><strong>CONFIRMED (AWS scan 2026-02-22):</strong> No rcm-dsync resources exist in production account (975050223773).
        <br><br>
        <strong>Questions to resolve:</strong>
        <ul style="margin-top: 0.5rem;">
            <li>Is production deployment blocked on something?</li>
            <li>What is the timeline for Salesforce â†’ RDS migration in prod?</li>
            <li>Is there a dependency on Gobodo or other systems?</li>
        </ul>
        <strong>Action:</strong> Clarify with Thomas/Anthony.
    </div>
    <div class="validation-note">
        <strong>VALIDATION â€” Section 10:</strong>
        <ul>
            <li><strong>AWS (Dev):</strong> Verify dev/staging resources: <code>aws cloudformation list-stacks --query 'StackSummaries[?contains(StackName, `dsync`)]' --profile dev</code></li>
            <li><strong>AWS (Prod):</strong> Check production account: <code>aws cloudformation list-stacks --query 'StackSummaries[?contains(StackName, `dsync`)]' --profile prod</code></li>
            <li><strong>AWS Step Functions:</strong> List state machines: <code>aws stepfunctions list-state-machines</code></li>
            <li><strong>AWS EventBridge:</strong> Check schedules: <code>aws events list-rules --name-prefix rcm-dsync</code></li>
            <li><strong>Salesforce:</strong> Check Connected Apps for data sync integration credentials</li>
            <li><strong>Git:</strong> Review <code>salesforce-data-sync/</code> repo for deployment status and roadmap</li>
            <li><strong>Team:</strong> Confirm production timeline with Thomas â€” is this waiting on something?</li>
        </ul>
    </div>

    <h2>11) Output Formats</h2>
    <ul>
        <li><strong>Entity schemas:</strong> JSON Schema definitions</li>
        <li><strong>Relationships:</strong> Graph edges (see Â§5)</li>
        <li><strong>Events:</strong> Catalog (see Â§7)</li>
        <li><strong>Storage:</strong> Versioned markdown + <code>ontology-map.aws.yaml</code></li>
    </ul>
    <div class="review-note">
        <strong>REVIEW:</strong> Define actual JSON/YAML schemas. Create OpenAPI spec for agents. Add example payloads.
    </div>
    <div class="validation-note">
        <strong>VALIDATION â€” Section 11:</strong>
        <ul>
            <li><strong>Git:</strong> Check if <code>openapi.yaml</code> or <code>swagger.json</code> exists in any repo</li>
            <li><strong>Git:</strong> Search for JSON Schema files: <code>find . -name "*.schema.json"</code></li>
            <li><strong>Git:</strong> Check <code>ontology-map.aws.yaml</code> for current machine-readable format</li>
            <li><strong>Postman:</strong> Export collections as OpenAPI if team uses Postman</li>
            <li><strong>TypeScript:</strong> Consider using <code>typescript-json-schema</code> to generate schemas from interfaces</li>
            <li><strong>Agent Integration:</strong> Define MCP server interface for agent access to ontology</li>
        </ul>
    </div>

    <hr>

    <h2>ğŸ“‹ Review Summary</h2>
    <table class="summary-table">
        <tr><th>Section</th><th>Priority</th><th>Action</th></tr>
        <tr><td>1) Purpose</td><td class="priority-medium">Medium</td><td>Add success criteria, version governance</td></tr>
        <tr><td>2) Domain Boundaries</td><td class="priority-medium">Medium</td><td>Add team ownership, UK contexts</td></tr>
        <tr><td>3) System Landscape</td><td class="priority-high">HIGH</td><td>Fresh AWS scan, FIX Gobodo security</td></tr>
        <tr><td>4) API Surface</td><td class="priority-medium">Medium</td><td>Add auth requirements per endpoint</td></tr>
        <tr><td>5) Entity Model</td><td class="priority-medium">Medium</td><td>Add field definitions from schemas</td></tr>
        <tr><td>6) Projections</td><td class="priority-medium">Medium</td><td>Define dashboard read models</td></tr>
        <tr><td>7) Commands/Events</td><td class="priority-medium">Medium</td><td>Add sequence diagrams, Commands section</td></tr>
        <tr><td>8) Policy & Safety</td><td class="priority-high">HIGH</td><td>Expand autonomy boundaries</td></tr>
        <tr><td>9) Implementation</td><td class="priority-low">Low</td><td>Add deployment commands</td></tr>
        <tr><td>10) Migration</td><td class="priority-high">HIGH</td><td>Clarify production status</td></tr>
        <tr><td>11) Output Formats</td><td class="priority-high">HIGH</td><td>Create machine-readable schemas</td></tr>
    </table>

</main>
</body>
</html>
